# ============================================
# 多租户账单导入系统 - 环境配置示例
# ============================================
# 复制此文件为 .env 并填写您的配置信息
# ============================================

# ==================== 模式选择 ====================
# 多租户模式开关
# - true: 启用多用户模式（需要配置 SECRET_KEY）
# - false: 强制单用户模式（使用原有环境变量配置 Notion）
# - auto: 自动检测（存在数据库则多用户，否则单用户）
MULTI_TENANT_ENABLED=auto

# ==================== 多租户模式配置 ====================
# 以下配置在多租户模式下需要设置

# JWT 密钥（必填，用于加密 token）
# 生成方法：python -c "import secrets; print(secrets.token_urlsafe(48))"
SECRET_KEY=your-secret-key-here-change-this-in-production

# JWT Token 过期时间（分钟）
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15

# JWT Refresh Token 过期时间（天）
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# 数据库路径
DATABASE_URL=sqlite:///data/database.sqlite

# 文件上传配置
MAX_UPLOAD_SIZE=52428800
ALLOWED_FILE_EXTENSIONS=.csv,.txt,.xls,.xlsx

# 用户注册开关
REGISTRATION_ENABLED=true

# ==================== 单用户模式配置 ====================
# 以下配置在单用户模式下或作为默认管理员配置时需要设置

# Notion API 密钥
# 在 https://www.notion.so/my-integrations 创建集成
NOTION_API_KEY=secret_your_notion_api_key_here

# 收入数据库 ID
# 从收入数据库 URL 中复制，例如：https://notion.so/workspace/{database_id}?v=...
NOTION_INCOME_DATABASE_ID=your_income_database_id_here

# 支出数据库 ID
NOTION_EXPENSE_DATABASE_ID=your_expense_database_id_here

# ==================== 账单复盘配置 ====================
# 复盘数据库 ID（可选）
NOTION_MONTHLY_REVIEW_DB=your_monthly_review_database_id_here
NOTION_QUARTERLY_REVIEW_DB=your_quarterly_review_database_id_here
NOTION_YEARLY_REVIEW_DB=your_yearly_review_database_id_here

# 复盘模板 ID（可选）
NOTION_MONTHLY_TEMPLATE_ID=your_monthly_template_id_here
NOTION_QUARTERLY_TEMPLATE_ID=your_quarterly_template_id_here
NOTION_YEARLY_TEMPLATE_ID=your_yearly_template_id_here

# ==================== 通用配置 ====================

# 默认账单文件目录
DEFAULT_BILL_DIR=./bills

# 默认账单平台（alipay/wechat/unionpay）
DEFAULT_BILL_PLATFORM=alipay

# 定时任务配置
SCHEDULER_ENABLED=false
SCHEDULER_CRON=0 0 1 * *

# 日志级别（DEBUG/INFO/WARNING/ERROR）
LOG_LEVEL=INFO
